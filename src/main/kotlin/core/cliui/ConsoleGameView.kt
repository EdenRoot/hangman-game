package dev.kiryao.core.cliui

class ConsoleGameView : GameView {
    override fun showOnBoarding() {
        print(
            """
,-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------,
|                                                                                                ▲                                                                                   <>
|                                                                       Разверни(-те) окно консоли, чтобы иметь доступ к экрану игры!                                                 |
|          _____                                               _____                                               _____                                               _____          |
|         /\    \                   _______                   /\    \                   _______                   /\    \                   _______                   /\    \         |
|        /::\____\                 /::\    \                 /::\____\                 /::\    \                 /::\____\                 /::\    \                 /::\____\        |
|       /:::/    /                /::::\    \               /::::|   |                /::::\    \               /::::|   |                /::::\    \               /::::|   |        |
|      /:::/    /                /::::::\    \             /:::::|   |               /::::::\    \             /:::::|   |               /::::::\    \             /:::::|   |        |
|     /:::/    /                /:::/\:::\    \           /::::::|   |              /:::/\:::\    \           /::::::|   |              /:::/\:::\    \           /::::::|   |        |
|    /:::/____/                /:::/__\:::\    \         /:::/|::|   |             /:::/  \:::\    \         /:::/|::|   |             /:::/__\:::\    \         /:::/|::|   |        |
|   /::::\    \               /::::\   \:::\    \       /:::/ |::|   |            /:::/    \:::\    \       /:::/ |::|   |            /::::\   \:::\    \       /:::/ |::|   |        |
|  /::::::\    \   _____     /::::::\   \:::\    \     /:::/  |::|   | _____     /:::/    / \:::\    \     /:::/  |::|___|______     /::::::\   \:::\    \     /:::/  |::|   | _____  |
| /:::/\:::\    \ /\    \   /:::/\:::\   \:::\____\   /:::/   |::|   |/\    \   /:::/____/   \:::\ ___\   /:::/   |::::::::\    \   /:::/\:::\   \:::\____\   /:::/   |::|   |/\    \ |
|/:::/  \:::\    /::\____\ /:::/  \:::\   \:::|    | /:: /    |::|   /::\____\ |:::|    |  ___\:::|    | /:::/    |:::::::::\____\ /:::/  \:::\   \:::|    | /:: /    |::|   /::\____\|
|\::/    \:::\  /:::/    / \::/    \:::\  /:::|____| \::/    /|::|  /:::/    / |:::|____| /\  /:::|____| \::/    / ~~~~~/:::/    / \::/    \:::\  /:::|____| \::/    /|::|  /:::/    /|
| \/____/ \:::\/:::/    /   \/____/ \:::\/:::/    /   \/____/ |::| /:::/    /   \:::\   \/::\ \::/    /   \/____/      /:::/    /   \/____/ \:::\/:::/    /   \/____/ |::| /:::/    / |
|          \::::::/    /             \::::::/    /            |::|/:::/    /     \:::\   \:::\ \/____/                /:::/    /             \::::::/    /            |::|/:::/    /  |
|           \::::/    /               \::::/    /             |::::::/    /       \:::\   \:::\____\                 /:::/    /               \::::/    /             |::::::/    /   |
|           /:::/    /                /:::/    /              |:::::/    /         \:::\  /:::/    /                /:::/    /                /:::/    /              |:::::/    /    |
|          /:::/    /                /:::/    /               |::::/    /           \:::\/:::/    /                /:::/    /                /:::/    /               |::::/    /     |
|         /:::/    /                /:::/    /                /:::/    /             \::::::/    /                /:::/    /                /:::/    /                /:::/    /      |
|        /:::/    /                /:::/    /                /:::/    /               \::::/    /                /:::/    /                /:::/    /                /:::/    /       |
|        \::/    /                 \::/    /                 \::/    /                 \::/    /                 \::/    /                 \::/    /                 \::/    /        |
|         \/____/                   \/____/                   \/____/                   \/____/                   \/____/                   \/____/                   \/____/         |
|                                                                                                                                                                                     |
|                                                                              Нажмите 'Enter' чтобы продолжить! Либо ->                                                              |
|                                                                                                                                                                                     |
|                                                                                                                                                                                     |
|                                                                                                                                                                                     |
|                                                                                                                                                                                     |
|-> Либо введите два слова в конфигурацию запуска, чтобы войти в не интерактивный (тестовый) режим работы.                                                                            |
|   Например, в поле Program arguments введите два аргумента: волокно толокно                                                                                                         |
|                                                                                                ▼                                                                                   <>
'-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------'
>>
        """.trimIndent()
        )
    }

    override fun clearScreen() {
        println("\n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n")
    }

    override fun showGoodbye() {
        println("Спасибо за игру, всего доброго!")
    }

    override fun showChoseCategory(){
        print(
            """
,------------------------------------------------------------------------------------------------------------------------------------,
|                                                      Выберите категорию ниже:                                                      |
|     ______________________________________     _________________________________     _________________________________________     |
|    |               _                      |   |               _             _   |   |         _       _    _                  |    |
|    |   ____   ____| |_ _   _  ____ ____   |   |    ____ ____ (_)____   ____| |  |   |    ____| | ___ | |_ | |__   ____  ___   |    |
|    |  |  _ \ / _  |  _) | | |/ ___) _  )  |   |   / _  |  _ \| |    \ / _  | |  |   |   / ___) |/ _ \|  _)|  _ \ / _  )/___)  |    |
|    |  | | | ( ( | | |_| |_| | |  ( (/ /   |   |  ( ( | | | | | | | | ( ( | | |  |   |  ( (___| | |_| | |__| | | ( (/ /|___ |  |    |
|    |  |_| |_|\_||_|\___)____|_|   \____)  |   |   \_||_|_| |_|_|_|_|_|\_||_|_|  |   |   \____)_|\___/ \___)_| |_|\____|___/   |    |
|    |             1. Природа(п)            |   |           2. Животные(ж)        |   |               3. Одежда(о)              |    |
|    '--------------------------------------'   '---------------------------------'   '-----------------------------------------'    |
|                                                                                                                                    |
|     ______________________________________     _________________________________     _________________________________________     |
|    |    _           _     _               |   |      ____                _      |   |                         _               |    |
|    |   | |__   ___ | | _ | | _  _   _     |   |     /  __)              | |     |   |    _____ ____ ____   _ | | ___  ____    |    |
|    |   |  _ \ / _ \| || \| || \| | | |    |   |     | |__ ___   ___   _ | |     |   |   /  ___) _  |  _ \ / || |/ _ \|    \   |    |
|    |   | | | | |_| | |_) ) |_) ) |_| |    |   |     |  __) _ \ / _ \ / || |     |   |   | |  ( ( | | | | ( (_| | |_| | | | |  |    |
|    |   |_| |_|\___/|____/|____/ \__  |    |   |     | | | |_| | |_| ( (_| |     |   |   |_|   \_||_|_| |_|\____|\___/|_|_|_|  |    |
|    |                           (____/     |   |     |_|  \___/ \___/ \____|     |   |                                         |    |
|    |              4. Хобби(х)             |   |             5. Еда(е)           |   |             6. Случайная(с)             |    |
|    '--------------------------------------'   '---------------------------------'   '-----------------------------------------'    |
|                                                                                                                                    |
|                                                                                                                                    |
|                                                                                                                                    |
|                                                                                                                                    |
|                                                                                                                                    |
|                                                                                                                                    |
|    Для выбора категории введите первую букву(или цифру) категории или отправьте пустую строку (для выбора случайной категории):    |
'------------------------------------------------------------------------------------------------------------------------------------'
>>
            """.trimIndent()
        )
    }
    override fun showChoseDifficulty(){
        print(
            """
,------------------------------------------------------------------------------------------------------------------------------------,
|                                                                                                                                    |
|                                                                                                                                    |
|                                                                                                                                    |
|                                                      Выберите сложность ниже:                                                      |
|    .______________________________________.   ._____________________________________.   ._____________________________________.    |
|    |             Меньше 5 букв            |   |               5-7 букв          _   |   |       _       8+ букв      _        |    |
|    |         ____ ____  ___ _   _         |   |   ____   ___   ____ ____   ____| |  |   |      | |__   ____  ____ __| |       |    |
|    |        / _  ) _  |/___) |_| |        |   |  |  _ \ / _ \ / ___)    \ / _  | |  |   |      |  _ \ / _  |/ ___) _  |       |    |
|    |       ( (/ ( ( | |___\ \__  |        |   |  | | | | |_| | |   | | | ( ( | | |  |   |      | | | ( ( | | |  ( (_| |       |    |
|    |        \____)_||_(___/(____/         |   |  |_| |_|\___/|_|   |_|_|_|\_||_|_|  |   |      |_| |_|\_||_|_|   \____|       |    |
|    |            1. Легкая(л)              |   |           2. Обычная(о)             |   |            3. Тяжелая(т)            |    |
|    '--------------------------------------'   '-------------------------------------'   '-------------------------------------'    |
|                                                                                                                                    |
|                                             ._________________________________________.                                            |
|                                             |                         _               |                                            |
|                                             |    _____ ____ ____   _ | | ___  ____    |                                            |
|                                             |   /  ___) _  |  _ \ / || |/ _ \|    \   |                                            |
|                                             |   | |  ( ( | | | | ( (_| | |_| | | | |  |                                            |
|                                             |   |_|   \_||_|_| |_|\____|\___/|_|_|_|  |                                            |
|                                             |                                         |                                            |
|                                             |             4. Случайная(с)             |                                            |
|                                             '-----------------------------------------'                                            |
|                                                                                                                                    |
|                                                                                                                                    |
|                                                                                                                                    |                                                                                                                                                                       |                                                                                                                                    |
|    Для выбора сложности введите первую букву(или цифру) сложности или отправьте пустую строку (для выбора случайной сложности):    |
'------------------------------------------------------------------------------------------------------------------------------------'
>>
            """.trimIndent()
        )
    }

    override fun showErrorInputLetter() {
        println(">> Не удалось распознать букву! Попробуйте, пожалуйста, ещё раз. <<")
    }

    override fun showErrorInput() {
        println(">> Не удалось распознать команду! Повторите, пожалуйста. <<")
    }

    override fun showHint(description: String) {
        println(description)
    }

    override fun showNoHintAvailable() {
        println("\nК сожалению, для этого слова нет подсказки.\n")
    }

    override fun showUsedLetter(letter: Char) {
        println(">> Буква \"${letter.uppercase()}\" уже использована! <<")
    }

    override fun showGameState(
        mask: String,
        health: Int,
        healthDisplay: String,
        usedLetters: Set<Char>,
        hintText: String
    ) {
        val gallows = getNewGallows(health)

        print(
            """
Виселица: $gallows

Здоровье: $healthDisplay

Загаданное слово: ${mask.uppercase().split("").joinToString(" ")}

Использованные буквы: [${usedLetters.joinToString(" ")}]

$hintText

Введите букву:
>>
        """.trimIndent()
        )
    }

    override fun showWin(word: String){
        println("""

           _______                       _________ _
 |\     /|(  ___  )|\     /|    |\     /|\__   __/( (    /|
 ( \   / )| (   ) || )   ( |    | )   ( |   ) (   |  \  ( |
  \ (_) / | |   | || |   | |    | | _ | |   | |   |   \ | |
   \   /  | |   | || |   | |    | |( )| |   | |   | (\ \) |
    ) (   | |   | || |   | |    | || || |   | |   | | \   |
    | |   | (___) || (___) |    | () () |___) (___| )  \  |
    \_/   (_______)(_______)    (_______)\_______/|/    )_)

Победа!
Загаданное слово: ${word.uppercase()}

Чтобы сыграть еще раз -> нажмите 'Enter'.
Для выхода введите "exit".

        """.trimIndent())
    }

    override fun showGameOver(word: String){
        println("""
  _______  _______  _______  _______    _______           _______  _______
 (  ____ \(  ___  )(       )(  ____ \  (  ___  )|\     /|(  ____ \(  ____ )
 | (    \/| (   ) || () () || (    \/  | (   ) || )   ( || (    \/| (    )|
 | |      | (___) || || || || (__      | |   | || |   | || (__    | (____)|
 | | ____ |  ___  || |(_)| ||  __)     | |   | |( (   ) )|  __)   |     __)
 | | \_  )| (   ) || |   | || (        | |   | | \ \_/ / | (      | (\ (
 | (___) || )   ( || )   ( || (____/\  | (___) |  \   /  | (____/\| ) \ \__
 (_______)|/     \||/     \|(_______/  (_______)   \_/   (_______/|/   \__/

Вы проиграли! Конец игры.
${GallowsSteps.RightLeg.view}

Загаданное слово: ${word.uppercase()}

Чтобы сыграть еще раз -> нажмите 'Enter'.
Для выхода введите "exit".
        """.trimIndent())
    }

    override fun userInput(): String = readln().trim().lowercase()

    private fun getNewGallows(health: Int) = when (health) {
        6 -> GallowsSteps.Rope
        5 -> GallowsSteps.Had
        4 -> GallowsSteps.Torso
        3 -> GallowsSteps.LeftHand
        2 -> GallowsSteps.RightHand
        1 -> GallowsSteps.LeftLeg
        0 -> GallowsSteps.RightLeg
        else -> GallowsSteps.Default
    }.view
}